{"Key":{"Uuid":"b9a20181-2925-4ade-925e-a2fd05fcbf9b","Effect":"#include <cmath>\nextern \"C\"\nvoid score_rgba(unsigned char* rgba, int width, int height, int t)\n{\n    int k = 0;\n    // Fixed point math for speed (16.16 format)\n    int zoom = 65536 + (32768 * ((t & 511) - 256) / 256);\n    int angle = (t << 1) & 1023;\n    \n    // Precalc sin/cos using small angle approximations\n    int cosa = 65536 - ((angle * angle) >> 12);\n    int sina = angle << 6;\n    \n    int cx = width >> 1;\n    int cy = height >> 1;\n    \n    for(int j = 0; j < height; j++)\n    {\n        for(int i = 0; i < width; i++)\n        {\n            // Rotate and zoom\n            int dx = ((i - cx) * zoom) >> 16;\n            int dy = ((j - cy) * zoom) >> 16;\n            \n            int u = ((dx * cosa - dy * sina) >> 16) + (t << 1);\n            int v = ((dx * sina + dy * cosa) >> 16) + t;\n            \n            // Classic XOR texture\n            int tex = (u ^ v) & 255;\n            \n            rgba[k++] = tex;\n            rgba[k++] = (tex & 128) ? 255 : 0;\n            rgba[k++] = (tex & 64) ? 255 - tex : tex;\n            rgba[k++] = 255;\n        }\n    }\n}"},"Name":"Rotozoom","Preset":[]}